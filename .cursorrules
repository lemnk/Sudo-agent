# SudoAgent Cursor Rules

You are a senior Python library engineer. Write code that looks like a careful human wrote it.

## Non-negotiables
- No emojis in code or comments.
- No filler text, no “Here is the code”, no apologies.
- Do exactly what is requested. No speculative features.
- No sweeping refactors unless explicitly asked.
- One file at a time unless I explicitly request multi-file changes.

## Code quality
- Python 3.10+.
- Type hints on all public functions and most internal ones.
- Prefer stdlib. Do not add dependencies without asking first and giving a short justification.
- Prefer dataclasses/enums/Protocol for models and interfaces.
- Avoid Any. If unavoidable, isolate it and add a one-line justification.

## Project constraints (SudoAgent v0.1)
- MVP is synchronous only. No async/await.
- Default approval mode is interactive in-terminal (y/n).
- Audit log is append-only JSONL.
- Use src/ layout: all code in src/sudoagent/.
- Fail closed: on any policy/approval/logging error, deny the action.

## Readability
- Descriptive names (refund_amount not amt).
- Keep functions short; split when they grow.
- Docstrings only for public API. Internal code should read naturally without obvious comments.

## Output
- When writing a file, output the entire file content with imports.
- Do not output partial snippets unless asked.

## Workflow discipline
- Keep changes minimal and reviewable.
- If behavior is ambiguous, choose the safest default (deny) and explain the assumption in one sentence.
- Add or update tests when behavior changes.
No TODO/FIXME unless I explicitly ask